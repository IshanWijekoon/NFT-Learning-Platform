<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Management - EduChain Creator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f7fa;
        }

        /* Navigation Bar */
        .navbar {
            position: sticky;
            top: 0;
            background: white;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            padding: 0 20px;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: #2c5aa0;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .logo:hover {
            color: #1e3f73;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 25px;
            align-items: center;
        }

        .nav-link {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            position: relative;
            transition: color 0.3s ease;
            padding: 8px 16px;
            border-radius: 20px;
        }

        .nav-link:hover {
            color: #2c5aa0;
            background: rgba(44, 90, 160, 0.1);
        }

        .nav-link.active {
            color: #2c5aa0;
            background: rgba(44, 90, 160, 0.15);
            font-weight: 600;
        }

        .logout-btn {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%) !important;
            color: white !important;
            padding: 10px 20px !important;
            border-radius: 25px !important;
            transition: all 0.3s ease !important;
        }

        .logout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.3);
            color: white !important;
        }

        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            padding: 5px;
            background: none;
            border: none;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: #333;
            margin: 3px 0;
            transition: 0.3s;
            border-radius: 2px;
        }

        .hamburger.active span:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active span:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
        }

        /* Main Content */
        main {
            padding: 40px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .page-header {
            margin-bottom: 40px;
        }

        .page-title {
            font-size: 2.5rem;
            font-weight: 600;
            color: #1e3f73;
            margin-bottom: 10px;
        }

        .page-subtitle {
            color: #666;
            font-size: 1.1rem;
        }

        /* Course Upload Form */
        .upload-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: #1e3f73;
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 3px solid #2c5aa0;
        }

        .upload-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #2c5aa0;
            box-shadow: 0 0 0 3px rgba(44, 90, 160, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
            cursor: pointer;
            background: #f8f9fa;
            border: 2px dashed #2c5aa0;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            width: 100%;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .file-input-wrapper:hover {
            background: rgba(44, 90, 160, 0.05);
        }

        .file-input-wrapper input[type=file] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }

        .file-input-text {
            color: #2c5aa0;
            font-weight: 500;
        }

        .thumbnail-preview {
            position: relative;
            margin-top: 10px;
        }

        .thumbnail-preview img {
            display: block;
            margin: 0 auto 10px;
            border: 2px solid #ddd;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .remove-thumbnail-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .remove-thumbnail-btn:hover {
            background: #c82333;
        }

        .form-actions {
            grid-column: 1 / -1;
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #2c5aa0 0%, #1e3f73 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(44, 90, 160, 0.3);
        }

        .btn-secondary {
            background: #f8f9fa;
            color: #666;
            border: 2px solid #e9ecef;
        }

        .btn-secondary:hover {
            background: #e9ecef;
            color: #333;
        }

        .error-message {
            color: #dc3545;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #28a745;
        }

        /* Course List Section */
        .courses-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 40px;
        }

        .courses-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .view-toggle {
            display: flex;
            gap: 10px;
        }

        .toggle-btn {
            padding: 8px 16px;
            border: 2px solid #e9ecef;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-btn.active {
            background: #2c5aa0;
            color: white;
            border-color: #2c5aa0;
        }

        .courses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
        }

        .course-card {
            border: 2px solid #e9ecef;
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            background: white;
        }

        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border-color: #2c5aa0;
        }

        .course-thumbnail {
            height: 180px;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #2c5aa0;
            position: relative;
            overflow: hidden;
        }

        .course-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .course-info {
            padding: 20px;
        }

        .course-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #1e3f73;
        }

        .course-category {
            background: rgba(44, 90, 160, 0.1);
            color: #2c5aa0;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            display: inline-block;
            margin-bottom: 10px;
        }

        .course-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 0.9rem;
            color: #666;
        }

        .course-actions {
            display: flex;
            gap: 10px;
        }

        .btn-small {
            padding: 6px 15px;
            font-size: 0.9rem;
            border-radius: 15px;
        }

        .btn-edit {
            background: #28a745;
            color: white;
            border: none;
        }

        .btn-edit:hover {
            background: #218838;
        }

        .btn-delete {
            background: #dc3545;
            color: white;
            border: none;
        }

        .btn-delete:hover {
            background: #c82333;
        }

        /* Table View */
        .courses-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .courses-table th,
        .courses-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        .courses-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #1e3f73;
        }

        .courses-table tbody tr:hover {
            background: #f8f9fa;
        }

        .table-thumbnail {
            width: 60px;
            height: 40px;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: #2c5aa0;
        }

        /* Analytics Section */
        .analytics-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .analytics-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
        }

        .analytics-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .analytics-label {
            font-size: 1rem;
            opacity: 0.9;
        }

        .course-performance {
            margin-top: 30px;
        }

        .performance-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .performance-bar {
            width: 200px;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .performance-fill {
            height: 100%;
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            transition: width 0.3s ease;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            padding: 25px 30px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1e3f73;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: #f8f9fa;
            color: #333;
        }

        .modal-body {
            padding: 30px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-menu {
                position: fixed;
                top: 70px;
                left: -100%;
                width: 100%;
                height: calc(100vh - 70px);
                background: white;
                flex-direction: column;
                justify-content: flex-start;
                align-items: center;
                gap: 20px;
                padding-top: 50px;
                transition: left 0.3s ease;
                box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            }

            .nav-menu.active {
                left: 0;
            }

            .hamburger {
                display: flex;
            }

            .upload-form {
                grid-template-columns: 1fr;
            }

            .courses-grid {
                grid-template-columns: 1fr;
            }

            .analytics-grid {
                grid-template-columns: 1fr;
            }

            .form-actions {
                flex-direction: column;
            }

            .performance-bar {
                width: 150px;
            }

            main {
                padding: 20px 15px;
            }

            .modal-content {
                width: 95%;
                margin: 10% auto;
            }
        }

        @media (max-width: 480px) {
            .page-title {
                font-size: 2rem;
            }

            .courses-header {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }

            .performance-item {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }

            .performance-bar {
                width: 100%;
            }
        }

        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation: none !important;
                transition: none !important;
            }
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Validation styles */
        .form-group input.invalid,
        .form-group select.invalid,
        .form-group textarea.invalid {
            border-color: #dc3545;
            box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.1);
        }

        .form-group input.valid,
        .form-group select.valid,
        .form-group textarea.valid {
            border-color: #28a745;
            box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.1);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="#" class="logo">EduChain</a>
            
            <ul class="nav-menu" id="navMenu">
                 <li><a href="home-creater.html" class="nav-link">Home</a></li>
                <li><a href="course-browser-creator.html" class="nav-link">Courses</a></li>
                <li><a href="course-management.html" class="nav-link">Course Management</a></li>
                <li><a href="dashboard-creater.html" class="nav-link">Dashboard</a></li>
                <li><a href="#" class="nav-link">Search NFT</a></li>
                <li><a href="login.html" class="nav-link logout-btn">Logout</a></li>
            </ul>

            <button class="hamburger" id="hamburger" aria-label="Toggle navigation menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main>
        <!-- Page Header -->
        <header class="page-header">
            <h1 class="page-title">Course Management</h1>
            <p class="page-subtitle">Create, manage, and track your course portfolio</p>
        </header>

        <!-- Success Message -->
        <div id="successMessage" class="success-message" style="display: none;"></div>

        <!-- Course Upload Section -->
        <section class="upload-section">
            <h2 class="section-title">Create New Course</h2>
            <form class="upload-form" id="courseForm">
                <div class="form-group">
                    <label for="courseName">Course Name *</label>
                    <input type="text" id="courseName" name="courseName" required>
                    <div class="error-message" id="courseNameError"></div>
                </div>

                <div class="form-group">
                    <label for="courseCategory">Category *</label>
                    <select id="courseCategory" name="courseCategory" required>
                        <option value="">Select Category</option>
                        <option value="Web Development">Web Development</option>
                        <option value="Mobile Development">Mobile Development</option>
                        <option value="Data Science">Data Science</option>
                        <option value="Machine Learning">Machine Learning</option>
                        <option value="Blockchain">Blockchain</option>
                        <option value="UI/UX Design">UI/UX Design</option>
                        <option value="Digital Marketing">Digital Marketing</option>
                        <option value="Business">Business</option>
                        <option value="Photography">Photography</option>
                        <option value="Music">Music</option>
                    </select>
                    <div class="error-message" id="courseCategoryError"></div>
                </div>

                <div class="form-group">
                    <label for="coursePrice">Price ($) *</label>
                    <input type="number" id="coursePrice" name="coursePrice" min="0" step="0.01" required>
                    <div class="error-message" id="coursePriceError"></div>
                </div>

                <div class="form-group">
                    <label for="courseDuration">Duration (hours) *</label>
                    <input type="number" id="courseDuration" name="courseDuration" min="0.5" step="0.5" required>
                    <div class="error-message" id="courseDurationError"></div>
                </div>

                <div class="form-group full-width">
                    <label for="courseDescription">Course Description *</label>
                    <textarea id="courseDescription" name="courseDescription" placeholder="Describe your course content, what students will learn, and any prerequisites..." required></textarea>
                    <div class="error-message" id="courseDescriptionError"></div>
                </div>

                <div class="form-group full-width">
                    <label for="courseThumbnail">Course Thumbnail</label>
                    <div class="file-input-wrapper" id="thumbnailWrapper">
                        <input type="file" id="courseThumbnail" name="courseThumbnail" accept="image/*">
                        <div class="file-input-text" id="thumbnailText">
                            üìÅ Click to upload thumbnail image<br>
                            <small>Recommended: 1280x720px, JPG or PNG</small>
                        </div>
                        <div class="thumbnail-preview" id="thumbnailPreview" style="display: none;">
                            <img id="thumbnailImage" src="" alt="Thumbnail preview" style="max-width: 200px; max-height: 120px; border-radius: 8px;">
                            <button type="button" class="remove-thumbnail-btn" id="removeThumbnailBtn">Remove</button>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="resetBtn">Reset Form</button>
                    <button type="submit" class="btn btn-primary" id="submitBtn">Create Course</button>
                </div>
            </form>
        </section>

        <!-- Course List Section -->
        <section class="courses-section">
            <div class="courses-header">
                <h2 class="section-title">Your Courses</h2>
                <div class="view-toggle">
                    <button class="toggle-btn active" id="gridViewBtn">Grid View</button>
                    <button class="toggle-btn" id="tableViewBtn">Table View</button>
                </div>
            </div>

            <!-- Grid View -->
            <div class="courses-grid" id="coursesGrid">
                <!-- Courses will be dynamically inserted here -->
            </div>

            <!-- Table View -->
            <div style="display: none; overflow-x: auto;" id="coursesTable">
                <table class="courses-table">
                    <thead>
                        <tr>
                            <th>Thumbnail</th>
                            <th>Course Title</th>
                            <th>Category</th>
                            <th>Price</th>
                            <th>Duration</th>
                            <th>Students</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="coursesTableBody">
                        <!-- Table rows will be dynamically inserted here -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Analytics Section -->
        <section class="analytics-section">
            <h2 class="section-title">Course Analytics</h2>
            
            <div class="analytics-grid">
                <div class="analytics-card">
                    <div class="analytics-value" id="totalCoursesCount">0</div>
                    <div class="analytics-label">Total Courses</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-value" id="totalStudentsCount">0</div>
                    <div class="analytics-label">Total Enrolled Students</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-value" id="averageStudentsCount">0</div>
                    <div class="analytics-label">Avg. Students/Course</div>
                </div>
            </div>

            <div class="course-performance">
                <h3 style="margin-bottom: 20px; color: #1e3f73;">Course Enrollment Overview</h3>
                <div id="performanceList">
                    <!-- Performance items will be dynamically inserted here -->
                </div>
            </div>
        </section>
    </main>

    <!-- Edit Course Modal -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Edit Course</h3>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <form class="upload-form" id="editCourseForm">
                    <input type="hidden" id="editCourseId">
                    
                    <div class="form-group">
                        <label for="editCourseName">Course Name *</label>
                        <input type="text" id="editCourseName" name="courseName" required>
                    </div>

                    <div class="form-group">
                        <label for="editCourseCategory">Category *</label>
                        <select id="editCourseCategory" name="courseCategory" required>
                            <option value="">Select Category</option>
                            <option value="Web Development">Web Development</option>
                            <option value="Mobile Development">Mobile Development</option>
                            <option value="Data Science">Data Science</option>
                            <option value="Machine Learning">Machine Learning</option>
                            <option value="Blockchain">Blockchain</option>
                            <option value="UI/UX Design">UI/UX Design</option>
                            <option value="Digital Marketing">Digital Marketing</option>
                            <option value="Business">Business</option>
                            <option value="Photography">Photography</option>
                            <option value="Music">Music</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="editCoursePrice">Price ($) *</label>
                        <input type="number" id="editCoursePrice" name="coursePrice" min="0" step="0.01" required>
                    </div>

                    <div class="form-group">
                        <label for="editCourseDuration">Duration (hours) *</label>
                        <input type="number" id="editCourseDuration" name="courseDuration" min="0.5" step="0.5" required>
                    </div>

                    <div class="form-group full-width">
                        <label for="editCourseDescription">Course Description *</label>
                        <textarea id="editCourseDescription" name="courseDescription" required></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancelEditBtn">Cancel</button>
                        <button type="submit" class="btn btn-primary">Update Course</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        /*
         * Course Management System - Ready for Backend Integration
         * 
         * Backend Integration Notes:
         * 
         * 1. Replace localStorage with API calls:
         *    - saveCourses() -> POST/PUT to backend API
         *    - loadCourses() -> GET from backend API
         * 
         * 2. Student enrollment tracking:
         *    - enrollStudent() method is ready for backend integration
         *    - Call this method when students enroll through the frontend
         * 
         * 3. Course data structure includes:
         *    - enrollments: [] array to track individual students
         *    - students: count of enrolled students (auto-calculated)
         * 
         * 4. All fake data has been removed - courses start with 0 students
         * 5. Revenue tracking removed as requested
         */
        
        // Course Management System
        class CourseManager {
            constructor() {
                this.courses = this.loadCourses();
                this.currentView = 'grid';
                this.nextId = this.courses.length > 0 ? Math.max(...this.courses.map(c => c.id)) + 1 : 1;
                this.init();
            }

            init() {
                this.bindEvents();
                this.renderCourses();
                this.updateAnalytics();
            }

            bindEvents() {
                // Form submission
                document.getElementById('courseForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.createCourse();
                });

                // Edit form submission
                document.getElementById('editCourseForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.updateCourse();
                });

                // Reset button
                document.getElementById('resetBtn').addEventListener('click', () => {
                    this.resetForm();
                });

                // View toggle buttons
                document.getElementById('gridViewBtn').addEventListener('click', () => {
                    this.switchView('grid');
                });

                document.getElementById('tableViewBtn').addEventListener('click', () => {
                    this.switchView('table');
                });

                // Modal events
                document.getElementById('closeModal').addEventListener('click', () => {
                    this.closeModal();
                });

                document.getElementById('cancelEditBtn').addEventListener('click', () => {
                    this.closeModal();
                });

                // Close modal on outside click
                document.getElementById('editModal').addEventListener('click', (e) => {
                    if (e.target === document.getElementById('editModal')) {
                        this.closeModal();
                    }
                });

                // File input change
                document.getElementById('courseThumbnail').addEventListener('change', (e) => {
                    this.handleFileUpload(e);
                });

                // Remove thumbnail button
                document.getElementById('removeThumbnailBtn').addEventListener('click', () => {
                    this.resetThumbnailUpload();
                });

                // Real-time validation
                this.bindValidationEvents();
            }

            bindValidationEvents() {
                const fields = ['courseName', 'courseCategory', 'coursePrice', 'courseDuration', 'courseDescription'];
                fields.forEach(field => {
                    const input = document.getElementById(field);
                    input.addEventListener('blur', () => this.validateField(field));
                    input.addEventListener('input', () => this.clearFieldError(field));
                });
            }

            validateField(fieldName) {
                const field = document.getElementById(fieldName);
                const value = field.value.trim();
                let isValid = true;
                let errorMessage = '';

                switch (fieldName) {
                    case 'courseName':
                        if (!value) {
                            errorMessage = 'Course name is required';
                            isValid = false;
                        } else if (value.length < 3) {
                            errorMessage = 'Course name must be at least 3 characters';
                            isValid = false;
                        }
                        break;
                    case 'courseCategory':
                        if (!value) {
                            errorMessage = 'Please select a category';
                            isValid = false;
                        }
                        break;
                    case 'coursePrice':
                        if (!value || parseFloat(value) < 0) {
                            errorMessage = 'Please enter a valid price';
                            isValid = false;
                        }
                        break;
                    case 'courseDuration':
                        if (!value || parseFloat(value) < 0.5) {
                            errorMessage = 'Duration must be at least 0.5 hours';
                            isValid = false;
                        }
                        break;
                    case 'courseDescription':
                        if (!value) {
                            errorMessage = 'Course description is required';
                            isValid = false;
                        } else if (value.length < 50) {
                            errorMessage = 'Description must be at least 50 characters';
                            isValid = false;
                        }
                        break;
                }

                this.showFieldError(fieldName, errorMessage, isValid);
                return isValid;
            }

            showFieldError(fieldName, message, isValid) {
                const field = document.getElementById(fieldName);
                const errorElement = document.getElementById(fieldName + 'Error');
                
                if (isValid) {
                    field.classList.remove('invalid');
                    field.classList.add('valid');
                    errorElement.textContent = '';
                } else {
                    field.classList.remove('valid');
                    field.classList.add('invalid');
                    errorElement.textContent = message;
                }
            }

            clearFieldError(fieldName) {
                const field = document.getElementById(fieldName);
                const errorElement = document.getElementById(fieldName + 'Error');
                field.classList.remove('invalid', 'valid');
                errorElement.textContent = '';
            }

            validateForm() {
                const fields = ['courseName', 'courseCategory', 'coursePrice', 'courseDuration', 'courseDescription'];
                let isValid = true;

                fields.forEach(field => {
                    if (!this.validateField(field)) {
                        isValid = false;
                    }
                });

                return isValid;
            }

            handleFileUpload(e) {
                const file = e.target.files[0];
                const thumbnailText = document.getElementById('thumbnailText');
                const thumbnailPreview = document.getElementById('thumbnailPreview');
                const thumbnailImage = document.getElementById('thumbnailImage');

                if (file) {
                    // Validate file type
                    if (!file.type.startsWith('image/')) {
                        alert('Please select a valid image file.');
                        e.target.value = '';
                        return;
                    }

                    // Validate file size (5MB limit)
                    if (file.size > 5 * 1024 * 1024) {
                        alert('Image size should be less than 5MB.');
                        e.target.value = '';
                        return;
                    }

                    // Create file reader
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        thumbnailImage.src = event.target.result;
                        thumbnailText.style.display = 'none';
                        thumbnailPreview.style.display = 'block';
                        
                        // Store the image data for course creation
                        e.target.uploadedImageData = event.target.result;
                    };
                    reader.readAsDataURL(file);
                } else {
                    this.resetThumbnailUpload();
                }
            }

            resetThumbnailUpload() {
                const thumbnailInput = document.getElementById('courseThumbnail');
                const thumbnailText = document.getElementById('thumbnailText');
                const thumbnailPreview = document.getElementById('thumbnailPreview');
                
                thumbnailInput.value = '';
                thumbnailInput.uploadedImageData = null;
                thumbnailText.style.display = 'block';
                thumbnailPreview.style.display = 'none';
            }

            // Method to handle student enrollment (to be called when backend is connected)
            enrollStudent(courseId, studentData) {
                const course = this.courses.find(c => c.id === courseId);
                if (course) {
                    if (!course.enrollments) {
                        course.enrollments = [];
                    }
                    
                    // Check if student is already enrolled
                    const isAlreadyEnrolled = course.enrollments.some(enrollment => 
                        enrollment.studentId === studentData.studentId
                    );
                    
                    if (!isAlreadyEnrolled) {
                        course.enrollments.push({
                            studentId: studentData.studentId,
                            studentName: studentData.name,
                            enrolledAt: new Date().toISOString()
                        });
                        
                        course.students = course.enrollments.length;
                        this.saveCourses();
                        this.renderCourses();
                        this.updateAnalytics();
                        
                        return { success: true, message: 'Student enrolled successfully' };
                    } else {
                        return { success: false, message: 'Student already enrolled' };
                    }
                }
                return { success: false, message: 'Course not found' };
            }

            // Method to unenroll a student
            unenrollStudent(courseId, studentId) {
                const course = this.courses.find(c => c.id === courseId);
                if (course && course.enrollments) {
                    course.enrollments = course.enrollments.filter(enrollment => 
                        enrollment.studentId !== studentId
                    );
                    
                    course.students = course.enrollments.length;
                    this.saveCourses();
                    this.renderCourses();
                    this.updateAnalytics();
                    
                    return { success: true, message: 'Student unenrolled successfully' };
                }
                return { success: false, message: 'Course or enrollment not found' };
            }

            createCourse() {
                if (!this.validateForm()) {
                    return;
                }

                const formData = new FormData(document.getElementById('courseForm'));
                const thumbnailInput = document.getElementById('courseThumbnail');
                
                const course = {
                    id: this.nextId++,
                    name: formData.get('courseName'),
                    description: formData.get('courseDescription'),
                    category: formData.get('courseCategory'),
                    price: parseFloat(formData.get('coursePrice')),
                    duration: parseFloat(formData.get('courseDuration')),
                    thumbnail: thumbnailInput.uploadedImageData || this.getRandomThumbnail(),
                    students: 0, // Start with 0 students - will be updated when students enroll
                    enrollments: [], // Track actual enrollments
                    createdAt: new Date().toISOString()
                };

                this.courses.push(course);
                this.saveCourses();
                this.renderCourses();
                this.updateAnalytics();
                this.resetForm();
                this.showSuccessMessage('Course created successfully!');
            }

            updateCourse() {
                const courseId = parseInt(document.getElementById('editCourseId').value);
                const courseIndex = this.courses.findIndex(c => c.id === courseId);

                if (courseIndex === -1) return;

                const formData = new FormData(document.getElementById('editCourseForm'));
                const updatedCourse = {
                    ...this.courses[courseIndex],
                    name: formData.get('courseName'),
                    description: formData.get('courseDescription'),
                    category: formData.get('courseCategory'),
                    price: parseFloat(formData.get('coursePrice')),
                    duration: parseFloat(formData.get('courseDuration'))
                };

                this.courses[courseIndex] = updatedCourse;
                this.saveCourses();
                this.renderCourses();
                this.updateAnalytics();
                this.closeModal();
                this.showSuccessMessage('Course updated successfully!');
            }

            deleteCourse(courseId) {
                const course = this.courses.find(c => c.id === courseId);
                if (!course) return;

                if (confirm(`Are you sure you want to delete "${course.name}"? This action cannot be undone.`)) {
                    this.courses = this.courses.filter(c => c.id !== courseId);
                    this.saveCourses();
                    this.renderCourses();
                    this.updateAnalytics();
                    this.showSuccessMessage('Course deleted successfully!');
                }
            }

            editCourse(courseId) {
                const course = this.courses.find(c => c.id === courseId);
                if (!course) return;

                // Populate edit form
                document.getElementById('editCourseId').value = course.id;
                document.getElementById('editCourseName').value = course.name;
                document.getElementById('editCourseCategory').value = course.category;
                document.getElementById('editCoursePrice').value = course.price;
                document.getElementById('editCourseDuration').value = course.duration;
                document.getElementById('editCourseDescription').value = course.description;

                // Show modal
                document.getElementById('editModal').style.display = 'block';
            }

            closeModal() {
                document.getElementById('editModal').style.display = 'none';
            }

            switchView(view) {
                this.currentView = view;
                
                const gridBtn = document.getElementById('gridViewBtn');
                const tableBtn = document.getElementById('tableViewBtn');
                const gridView = document.getElementById('coursesGrid');
                const tableView = document.getElementById('coursesTable');

                if (view === 'grid') {
                    gridBtn.classList.add('active');
                    tableBtn.classList.remove('active');
                    gridView.style.display = 'grid';
                    tableView.style.display = 'none';
                } else {
                    tableBtn.classList.add('active');
                    gridBtn.classList.remove('active');
                    gridView.style.display = 'none';
                    tableView.style.display = 'block';
                }

                this.renderCourses();
            }

            renderCourses() {
                if (this.currentView === 'grid') {
                    this.renderGridView();
                } else {
                    this.renderTableView();
                }
            }

            renderGridView() {
                const container = document.getElementById('coursesGrid');
                
                if (this.courses.length === 0) {
                    container.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #666;">
                            <h3>No courses yet</h3>
                            <p>Create your first course to get started!</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = this.courses.map(course => `
                    <div class="course-card">
                        <div class="course-thumbnail">
                            ${course.thumbnail}
                        </div>
                        <div class="course-info">
                            <h3 class="course-title">${this.escapeHtml(course.name)}</h3>
                            <span class="course-category">${this.escapeHtml(course.category)}</span>
                            <div class="course-stats">
                                <span>üí∞ $${course.price}</span>
                                <span>‚è±Ô∏è ${course.duration}h</span>
                                <span>üë• ${course.students} students</span>
                            </div>
                            <div class="course-actions">
                                <button class="btn btn-small btn-edit" onclick="courseManager.editCourse(${course.id})">
                                    Edit
                                </button>
                                <button class="btn btn-small btn-delete" onclick="courseManager.deleteCourse(${course.id})">
                                    Delete
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            renderTableView() {
                const tbody = document.getElementById('coursesTableBody');
                
                if (this.courses.length === 0) {
                    tbody.innerHTML = `
                        <tr>
                            <td colspan="7" style="text-align: center; padding: 40px; color: #666;">
                                No courses yet. Create your first course to get started!
                            </td>
                        </tr>
                    `;
                    return;
                }

                tbody.innerHTML = this.courses.map(course => `
                    <tr>
                        <td>
                            <div class="table-thumbnail">${course.thumbnail}</div>
                        </td>
                        <td>${this.escapeHtml(course.name)}</td>
                        <td>${this.escapeHtml(course.category)}</td>
                        <td>$${course.price}</td>
                        <td>${course.duration}h</td>
                        <td>${course.students}</td>
                        <td>
                            <button class="btn btn-small btn-edit" onclick="courseManager.editCourse(${course.id})" style="margin-right: 5px;">
                                Edit
                            </button>
                            <button class="btn btn-small btn-delete" onclick="courseManager.deleteCourse(${course.id})">
                                Delete
                            </button>
                        </td>
                    </tr>
                `).join('');
            }

            updateAnalytics() {
                const totalCourses = this.courses.length;
                const totalStudents = this.courses.reduce((sum, course) => sum + course.students, 0);
                const averageStudents = totalCourses > 0 ? Math.round(totalStudents / totalCourses) : 0;

                document.getElementById('totalCoursesCount').textContent = totalCourses;
                document.getElementById('totalStudentsCount').textContent = totalStudents.toLocaleString();
                document.getElementById('averageStudentsCount').textContent = averageStudents;

                this.renderPerformanceChart();
            }

            renderPerformanceChart() {
                const container = document.getElementById('performanceList');
                
                if (this.courses.length === 0) {
                    container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">No courses created yet</p>';
                    return;
                }

                const maxStudents = Math.max(...this.courses.map(c => c.students));
                
                if (maxStudents === 0) {
                    container.innerHTML = this.courses.map(course => `
                        <div class="performance-item">
                            <div>
                                <strong>${this.escapeHtml(course.name)}</strong>
                                <div style="font-size: 0.9rem; color: #666;">No students enrolled yet</div>
                            </div>
                            <div class="performance-bar">
                                <div class="performance-fill" style="width: 0%; background: #e9ecef;"></div>
                            </div>
                        </div>
                    `).join('');
                    return;
                }
                
                container.innerHTML = this.courses.map(course => {
                    const percentage = (course.students / maxStudents) * 100;
                    const enrollmentText = course.students === 0 ? 'No students enrolled yet' : 
                                         course.students === 1 ? '1 student enrolled' : 
                                         `${course.students} students enrolled`;
                    
                    return `
                        <div class="performance-item">
                            <div>
                                <strong>${this.escapeHtml(course.name)}</strong>
                                <div style="font-size: 0.9rem; color: #666;">${enrollmentText}</div>
                            </div>
                            <div class="performance-bar">
                                <div class="performance-fill" style="width: ${percentage}%"></div>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            resetForm() {
                document.getElementById('courseForm').reset();
                
                // Clear validation states
                const fields = ['courseName', 'courseCategory', 'coursePrice', 'courseDuration', 'courseDescription'];
                fields.forEach(field => {
                    this.clearFieldError(field);
                });

                // Reset thumbnail upload
                this.resetThumbnailUpload();
            }

            showSuccessMessage(message) {
                const successElement = document.getElementById('successMessage');
                successElement.textContent = message;
                successElement.style.display = 'block';
                
                setTimeout(() => {
                    successElement.style.display = 'none';
                }, 5000);
            }

            getRandomThumbnail() {
                const thumbnails = ['üìö', 'üíª', 'üé®', 'üìä', 'üî¨', 'üéµ', 'üì∑', 'üé•', 'üèóÔ∏è', 'üåê'];
                return thumbnails[Math.floor(Math.random() * thumbnails.length)];
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            saveCourses() {
                localStorage.setItem('educhain_all_courses', JSON.stringify(this.courses));
            }

            loadCourses() {
                const saved = localStorage.getItem('educhain_all_courses');
                return saved ? JSON.parse(saved) : this.getDefaultCourses();
            }

            getDefaultCourses() {
                return [
                    {
                        id: 1,
                        name: 'Complete Web Development Bootcamp',
                        description: 'Learn HTML, CSS, JavaScript, React, Node.js and more in this comprehensive bootcamp designed for beginners.',
                        category: 'Web Development',
                        price: 99.99,
                        duration: 40,
                        thumbnail: 'üíª',
                        students: 1247,
                        createdAt: new Date(Date.now() - 86400000 * 30).toISOString()
                    },
                    {
                        id: 2,
                        name: 'React Masterclass',
                        description: 'Master React.js with hooks, context, and advanced patterns. Build real-world applications.',
                        category: 'Web Development',
                        price: 79.99,
                        duration: 25,
                        thumbnail: '‚öõÔ∏è',
                        students: 856,
                        createdAt: new Date(Date.now() - 86400000 * 20).toISOString()
                    },
                    {
                        id: 3,
                        name: 'UI/UX Design Fundamentals',
                        description: 'Learn the principles of user interface and user experience design with practical projects.',
                        category: 'UI/UX Design',
                        price: 69.99,
                        duration: 20,
                        thumbnail: 'üé®',
                        students: 632,
                        createdAt: new Date(Date.now() - 86400000 * 15).toISOString()
                    }
                ];
            }
        }

        // Mobile menu functionality
        const hamburger = document.getElementById('hamburger');
        const navMenu = document.getElementById('navMenu');

        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            navMenu.classList.toggle('active');
        });

        // Close mobile menu when clicking on a link
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', () => {
                hamburger.classList.remove('active');
                navMenu.classList.remove('active');
            });
        });

        // Close mobile menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!hamburger.contains(e.target) && !navMenu.contains(e.target)) {
                hamburger.classList.remove('active');
                navMenu.classList.remove('active');
            }
        });

        // Initialize course manager
        let courseManager;
        document.addEventListener('DOMContentLoaded', () => {
            courseManager = new CourseManager();
        });

        // Keyboard accessibility
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                hamburger.classList.remove('active');
                navMenu.classList.remove('active');
                courseManager?.closeModal();
            }
        });
    </script>
</body>
</html>